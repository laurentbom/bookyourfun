<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BookYourFunn - Find the event for you !</title>
    <link rel="icon" type="image/ico" href="img/favicon.ico">
    <link rel="stylesheet" href="css/styles.min.css">
    
</head>

<body id="byfApp">
    <div v-if="overlay" class="overlay" @click="closeModal(), closeNav()"></div>
    <!-- Nav & searchbar -->
    <nav class="navigation flex">
        <!-- Logo + burger -->
        <div class="navigation__left flex align-c">
            <!-- Burger Menu -->
            <div class="navigation__burger">
                <div :class="'burger-menu ' + burgerNavClass" @click="openMobileMenu">
                    <div :class="'barre-top ' + burgerNavClass"></div>
                    <div :class="'barre-middle ' + burgerNavClass"></div>
                    <div :class="'barre-bottom ' + burgerNavClass"></div>
                </div>
            </div>
            <!-- Logo -->
            <a class="navigation__logo" href="index.html">BookYourFun</a>
        </div>
        <!-- Nav -->
        <ul :class="'flex navigation__main ' + mobileNavClass">
            <!-- Nav desktop Segments -->
            <li v-for="(navLink, index) in navLinks" @click="getGenres(navLink.id)" :data-id="navLink.id"><a href="#">{{navLink.name}}</a></li>
            <!-- Nav desktop Genres -->
            <nav class="navGenres" v-if="genres.length > 0 && !isMobile">
                <p>Genres:</p>
                <ul v-show="genres.length > 0">
                    <li v-for="(genre, index) in genres" :key="index" :data-id="genre.id" @click="listAppLaunch">{{genre.name}}</li>
                </ul>
                <button @click="closeNav"><i class="fa-solid fa-arrow-up"></i></button>
                <a href="#" class="allGenres" :data-id="segment[0].id" @click="listAppLaunch">Voir tous les événements dans {{segment[0].name}}</a>
            </nav>
        </ul>
        <!-- Searchbar -->
        <div class="navigation__search flex  align-c">
            <p>Recherche</p>
            <div class="navigation__search__bar flex">
                <input v-model="searchQuery" @input="performSearch" @keyup.enter="searchWord" type="text" placeholder="Recherche par artiste, événement">
                <ul>
                    <li v-if="searchQuery.length >= 1 && searchResults.length == 0" class="searchInputInfo">Taper au moins un mot</li>
                    <li v-if="searchResults.length > 0" class="searchInputInfo">Suggestions</li>
                    <li  v-if="searchResults.length > 0" v-for="searchResult in searchResults" :key="searchResult.id" @click="modalLaunch(searchResult.id)"><a href="#">{{searchResult.name}}</a></li>
                </ul>
                <button @click="searchWord"><i class="fa-solid fa-magnifying-glass"></i></button>
            </div>
        </div>
    </nav>
    <!-- Header -->
    <header v-if="hpDatasUpcoming" class="header" @click="closeNav" :style="'background:url(' + urlImgHeader + ') center/cover'">
        <div class="header__content flex-c">
            <h2 class="header__content__title">{{titleHeader}}</h2>
            <a :href="urlHeader" class="header__content__btn btn" id="headerBtn">Tickets</a>
        </div>
    </header>
    <!-- Main -->
    <main class="main" @click="closeNav">
        <!-- Main container -->
        <div class="main__container">
            <!-- Queries section -->
            <section v-show="isQuerie" class="queries" id="querySection" ref="item">
                <div class="queries__title flex">
                    <div class="flex-c">
                        <h3>Recherche</h3>
                        <span>{{ resultsNumber }} Résultats</span>
                    </div>
                    <button class="closeQueries" @click="closeQueries"><i class="fa-solid fa-xmark"></i></button>
                </div>
                <div class="queriesComponent">
                    <ul class="queries__container">
                        <li v-for="(result, index) in hpDatasQuerie" :key="result.id">
                            <div class="querieDate">{{result.filteredDate}}<br>{{result.filteredTime}}</div>
                            <div class="querieInfos">
                                <div class="querieHour"></div>
                                <div class="querieName">{{result.name}}</div>
                                <div class="querieVenue">{{result._embedded.venues[0].address.line1}}, {{result._embedded.venues[0].city.name}}, {{result._embedded.venues[0].country.name}}</div>
                            </div>
                            <span class="querieMoreInfo btn" @click="modalLaunch(result.id)">Infos</span>
                            <span class="querieMoreInfoMobile">
                                <i class="fa-solid fa-arrow-right" @click="modalLaunch(result.id)"></i>
                            </span>
                        </li>
                    </ul>
                    <div class="queriesComponent__pagination">
                        <i v-show="showPaginationPrev" class="fa-solid fa-arrow-left" @click="queriePagination('prev')"></i>
                        <i v-show="showPaginationNext" class="fa-solid fa-arrow-right" @click="queriePagination('next')"></i>
                    </div>
                </div>
            </section>
            <!-- Upcoming section -->
            <section class="upcomingSuggests">
                <!-- Title -->
                <h3>Bientôt</h3>
                <!-- List -->
                <ul>
                    <!-- List Item -->
                    <li class="upcomingSuggests__item" v-if="hpDatasUpcoming" v-for="(event, index) in hpDatasUpcoming" :key="event.id" :data-id="event.id" @click="modalLaunch(event.id)">
                            <!-- Image -->
                            <div class="upcomingSuggests__img">
                                <img :src="event.filteredImage.url" :alt="event.name">
                            </div>
                            <!-- Infos -->
                            <span>{{event.classifications[0].genre.name}}</span>
                            <!-- Artist -->
                            <p>{{event.name}}</p>
                    </li>
                </ul>
            </section>
            <!-- Music section -->
            <section class="musicSuggests">
                <!-- Line -->
                <div class="greyLine"></div>
                <h3>Musique</h3>
                <ul>
                    <li v-if="hpDatasMusic" v-for="(event, index) in hpDatasMusic" :key="event.id" @click="modalLaunch(event.id)">
                            <div class="suggest__img flex-c">
                                <img :src="event.filteredImage.url" :alt="event.name">
                            </div>
                            <span>{{event.classifications[0].genre.name}}</span>
                            <p>{{event.name}}</p>
                            <p class="resumt">{{event.filteredDate}}</p>
                            <span class="ticketLink">Informations</span>
                    </li>
                </ul>
            </section>
            <!-- Arts section -->
            <section class="artSuggests">
                <!-- Line -->
                <div class="greyLine"></div>
                <h3>Arts & théâtre</h3>
                <ul>
                    <li v-if="hpDatasArt" v-for="(event, index) in hpDatasArt" :key="event.id" @click="modalLaunch(event.id)">
                            <div class="suggest__img flex-c">
                                <img :src="event.filteredImage.url" :alt="event.name">
                            </div>
                            <span>{{event.classifications[0].genre.name}}</span>
                            <p>{{event.name}}</p>
                            <p class="resumt">{{event.filteredDate}}</p>
                            <span class="ticketLink">Informations</span>
                    </li>
                </ul>
            </section>
            <!-- Sports section -->
            <section class="sportSuggests">
                <!-- Line -->
                <div class="greyLine"></div>
                <h3>Sports</h3>
                <ul>
                    <li v-if="hpDatasSport" v-for="(event, index) in hpDatasSport" :key="event.id" @click="modalLaunch(event.id)">
                            <div class="suggest__img flex-c">
                                <img :src="event.filteredImage.url" :alt="event.name">
                            </div>
                            <span>{{event.classifications[0].genre.name}}</span>
                            <p>{{event.name}}</p>
                            <p class="resumt">{{event.filteredDate}}</p>
                            <span class="ticketLink">Informations</span>
                    </li>
                </ul>
            </section>
        </div>
        <!-- Aside Suggests -->
        <aside class="main__aside">
            <h3>Plus</h3>
            <ul class="suggests">
                <li v-if="hpDatasSuggest" v-for="(event, index) in hpDatasSuggest" :key="event.id" @click="modalLaunch(event.id)">
                        <div class="aside__img">
                            <img :src="event.filteredImage.url" :alt="event.name">
                        </div>
                        <span>{{event.name}}</span>
                </li>
            </ul>
            <div class="greyLine"></div>
            <div class="addAside">
                <a href="#">Your add here</a>
            </div>
        </aside>
        <!-- Modal Window -->
        <div v-if="modalDatas" :class="'modale ' + modalAnimClass">
            <div class="modale__title flex">
                <div class="flex-c">
                    <h3>{{modalDatas.name}}</h3>
                </div>
                <button @click="closeModal" class="closeModale"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="modale__content flex-c">
                <div class="modale__content__col1 flex">
                    <div class="modaleImg">
                        <a :href="modalDatas.filteredImage.url"><img :src="modalDatas.filteredImage.url" :alt="modalDatas.name"></a>
                    </div>
                    <div class="modaleText flex-c">
                            <!-- Title -->
                            <p>{{modalDatas.name}}</p>
                            <!-- Genre -->
                            <p v-if="modalDatas._embedded.attractions"><strong>Genre:</strong> {{modalDatas._embedded.attractions[0].classifications[0].segment.name}}, {{modalDatas._embedded.attractions[0].classifications[0].genre.name}}</p>
                            <p v-else><strong>Genre:</strong> {{modalDatas.classifications[0].segment.name}}, {{modalDatas.classifications[0].genre.name}}</p>
                            <!-- Date -->
                            <p><strong>Date:</strong> {{modalDatas.filteredDate}}<span v-if="modalDatas.filteredTime">, {{modalDatas.filteredTime}}</span></p>
                            <!-- Adress -->
                            <p><strong>Adresse:</strong> {{modalDatas._embedded.venues[0].address.line1}}, {{modalDatas._embedded.venues[0].city.name}}, {{modalDatas._embedded.venues[0].country.name}}</p>
                            <!-- Status -->
                            <p><strong>Statut:</strong> {{modalDatas.dates.status.code}}</p>
                        <a :href="modalDatas.url" class="btn">Tickets</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- To the top button -->
        <button v-if="showButton" class="topButton" @click="toTheTop"><i class="fa-solid fa-arrow-up"></i></button>
    </main>
    <!-- Footer -->
    <footer class="footer" @click="closeNav">
        <div>
            <div class="footer__top">
                <a href="#" class="footer__top__logo logo">BookYourFun</a>
                <p>Use of <a href="https://www.ticketmaster.be/">TicketMaster</a>  API for a student work. No tickets are on sale on this website, only link to other websites from the API.</p>
                <p>If needed contact me: <a href="mailto:laurent.bomal@gmail.com">laurent.bomal@gmail.com</a></p>
            </div>
            <nav class="footerNav">
                <ul>
                    <li v-if="isMobile" v-for="(navLink, index) in navLinks" :key="index" class="navFooterMobile">
                        <a id="segmentFooterLink" href="#segmentFooterLink" @click="getGenresFooterMobile(navLink.id)" :data-id="navLink.id" class="segFooter">{{navLink.name}}</a>
                        <ul class="dropdown-menu" v-show="(activeLinkId === navLink.id && showDropdown)">
                            <li v-for="(genreFooter, index) in genresFooter" :key="index"><a href="#" class="genreFooterCss" :data-id="genreFooter.id">{{genreFooter.name}}</a></li>
                            <li><a href="#" class="genreFooterCss">Tous</a></li>
                        </ul>
                    </li>
                    <div v-else class="navFooterDesktop flex-c">
                        <div class="footerDS">
                            <li v-for="(navLink, index) in navLinks" :key="index">
                                <a id="segmentFooterLinkDesktop" href="#segmentFooterLinkDesktop" @click="getGenresFooterDesktop(navLink.id)" :data-id="navLink.id" class="segFooter">{{navLink.name}}</a>
                            </li>
                        </div>
                        <div class="footerDG flex-c">
                            <span>Genres</span>
                            <div class="footerDG__list">
                                <p>Tous</p>
                                <p v-for="(genreFooterDesktop, index) in genresFooterDesktop" :data-id="genreFooterDesktop.id" class="fade">{{genreFooterDesktop.name}}</p>
                            </div>
                        </div>
                    </div>
                </ul>

            </nav>
        </div>
        <div class="footer__copyright">
            © 2023 Laurent Bomal. Tous droits réservés.
        </div>
    </footer>
    <!-- Scripts -->
    <script src="https://kit.fontawesome.com/e6327d8d43.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.1/vue.global.min.js" integrity="sha512-adgKitI7rma1GrZi3dXfRvGXDVm8DzwbFs9UjdWeee5cslIrcgS9+PHj50Buc0i+kEXIEN9+Pu2OqikA3IJ2Xw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="js/main.js"></script>
</body>
</html>